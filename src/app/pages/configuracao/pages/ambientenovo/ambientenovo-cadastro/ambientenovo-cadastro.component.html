<app-pagecadastro [title]="'CONFIGURACAO_PARA_NOVO_AMBIENTE'">
    <div page-content fxFlex fxLayout="column">

        <!-- <div id="ambiente-novo" class="page-cadastro slide" fxFlexFill layout="column"> -->
        <form [formGroup]="form">
            <!-- <mat-card class="conteudo">
            <mat-card-header>
                <mat-card-title translate>CONFIGURACAO_PARA_NOVO_AMBIENTE</mat-card-title>
            </mat-card-header>
            <mat-card-content> -->
            <p-tabView>
                <p-tabPanel>
                    {{'EMPRESA' | translate}}
                    <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="16px">
                        <div *ngIf="empresa.id" fxFlex="10">
                            <div class="p-field" style="width: 50%">
                                <input placeholder="{{'CODIGO'|translate}}" formControlName="id" disabled="true"
                                    tabindex="-1" type="text" required="false">
                            </div>
                        </div>
                        <div fxFlex>
                            <div class="p-field" style="width: 100%">
                                <input type="text" placeholder="{{'RAZAO_SOCIAL' |translate}}" name="razaoSocial"
                                    formControlName="razaoSocial" required />
                                <small
                                    *ngIf="form.controls['razaoSocial'].hasError('required') && form.controls['razaoSocial'].touched"
                                    class="mat-text-warn" translate>FAVOR_INFORMAR_A_RAZAO_SOCIAL_</small>
                            </div>
                        </div>
                        <div fxFlex>
                            <div class="p-field" class="mat-block" fxFlex="100%">
                                <input type="text" placeholder="{{'FANTASIA' |translate}}"
                                    formControlName="fantasiaEmpresa" />
                            </div>
                        </div>
                    </div>
                    <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="16px">
                        <div fxFlex="50" fxLayout="row" fxLayoutGap="16px">
                            <div class="p-fluid">
                                <div class="p-field" style="width: 100%">
                                    <input type="text" mask="00.000.000/0000-00" placeholder="{{'CNPJ' |translate}}"
                                        name="cnpjEmpresa" formControlName="cnpjEmpresa" required validaCpfCnpj
                                        (blur)="blurFocusCNPJEmpresa()" />

                                    <small
                                        *ngIf="form.controls['cnpjEmpresa'].hasError('required') && form.controls['cnpjEmpresa'].touched"
                                        class="mat-text-warn" translate>FAVOR_INFORMAR_O_CNPJ_</small>

                                    <small *ngIf="form.controls['cnpjEmpresa'].hasError('cnpj')" fxFlex translate>
                                        CNPJ_INVALIDO
                                    </small>
                                </div>
                            </div>
                            <div class="p-fluid">
                                <div class="p-field" style="width: 100%">
                                    <input type="text" mask="00000-000" placeholder="{{'CEP' |translate}}" name="cep"
                                        formControlName="cep" required />
                                    <small
                                        *ngIf="form.controls['cep'].hasError('required') && form.controls['cep'].touched"
                                        class="mat-text-warn" translate>FAVOR_INFORMAR_O_CEP_</small>
                                </div>
                            </div>
                        </div>
                        <div fxFlex="50" fxLayout="row" fxLayoutGap="16px">
                            <div fxLayout="column" fxFlex="40">
                                <div class="p-field">
                                    <!-- <input type="text" required pInputText placeholder="{{'ESTADO' | translate}}"
                                            [matAutocomplete]="autoEstado" formControlName="estado" name="estado" /> -->
                                    <small>
                                        *ngIf="form.controls['estado'].hasError('required') &&
                                        form.controls['estado'].touched">{{'INFORME'
                                        | translate}}</small>
                                </div>
                                <!-- <p-autocomplete [displayWith]="displayFn" #autoEstado="matAutocomplete">
                                        <mat-option *ngFor="let estado of listaEstado" [value]="estado">
                                            {{ estado.nome }}
                                        </mat-option>
                                    </p-autocomplete> -->
                            </div>
                            <div fxLayout="column" fxFlex="60">
                                <div class="p-field">
                                    <!-- <input matInput type="text" placeholder="{{'CIDADE' | translate}}" required
                                            [matAutocomplete]="autoCidade" formControlName="cidade" name="cidade" /> -->
                                    <small
                                        *ngIf="form.controls['cidade'].hasError('required') && form.controls['cidade'].touched">
                                        {{'INFORME'
                                        | translate}}</small>
                                    <!-- <p-autoComplete [displayWith]="displayFn" #autoCidade="matAutocomplete">
                                            <mat-option *ngFor="let cidade of listaCidade" [value]="cidade">
                                                {{ cidade.nome }}
                                            </mat-option>
                                        </p-autoComplete> -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="16px">
                        <div fxFlex="50" fxLayout="row" fxLayoutGap="16px">
                            <div class="p-fluid">
                                <div class="p-field" style="width: 100%">
                                    <input type="text" placeholder="{{'RUA' |translate}}" name="rua"
                                        formControlName="rua" required />
                                    <small
                                        *ngIf="form.controls['rua'].hasError('required') && form.controls['rua'].touched"
                                        class="mat-text-warn" translate>FAVOR_INFORMAR_A_RUA_</small>
                                </div>
                            </div>
                            <div class="p-field">
                                <input matInput type="text" placeholder="{{'NUMERO' |translate}}" name="numero"
                                    formControlName="numero" />
                            </div>
                        </div>
                        <div fxFlex="50" fxLayout="row" fxLayoutGap="16px">
                            <div fxFlex="60">
                                <div class="p-field" style="width: 100%">
                                    <input type="text" placeholder="{{'BAIRRO' |translate}}" name="bairro"
                                        formControlName="bairro" required />
                                    <small
                                        *ngIf="form.controls['bairro'].hasError('required') && form.controls['bairro'].touched"
                                        class="mat-text-warn" translate>FAVOR_INFORMAR_O_BAIRRO_</small>
                                </div>
                            </div>
                            <div class="p-field" fxFlex="40">
                                <input type="text" placeholder="{{'COMPLEMENTO' |translate}}" name="complemento"
                                    formControlName="complemento" />
                            </div>
                        </div>
                    </div>
                    <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="16px">
                        <div fxFlex="50">
                            <div class="p-field" style="width: 100%">
                                <input matInput required placeholder="{{'EMAIL' |translate}}" name="emailEmpresa"
                                    (blur)="blurFocusEmailEmpresa()" formControlName="emailEmpresa" type="text">
                                <small
                                    *ngIf="form.controls['emailEmpresa'].hasError('required') && form.controls['emailEmpresa'].touched"
                                    class="mat-text-warn" translate> FAVOR_INFORMAR_O_EMAIL_</small>
                                <small
                                    *ngIf="form.controls['emailEmpresa'].errors?.email && form.controls['emailEmpresa'].touched"
                                    class="mat-text-warn" translate> VOCE_DEVE_INFORMAR_UM_EMAIL_VALIDO_</small>
                            </div>
                        </div>
                        <div fxFlex="50" fxLayout="row" fxLayout.xs="column" fxLayoutGap="16px">
                            <div class="p-field" fxFlex="50">
                                <!-- <input type="text" mask="(00) 0000-0000"
                                        [specialCharacters]="['(' ,')','-',' ' ]"
                                        placeholder="{{'TELEFONE' |translate}}" formControlName="telefoneEmpresa" /> -->
                            </div>
                            <div class="p-field" class="mat-block" fxFlex="50">
                                <input matInput type="text" placeholder="{{'SITE' |translate}}" required name="site"
                                    formControlName="site" />
                            </div>
                        </div>
                    </div>
                </p-tabPanel>
                <p-tabPanel>
                    {{'USUARIO' | translate}}
                    <div fxLayout="column">
                        <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="16px">

                            <div fxFlex>
                                <div class="p-field" style="width: 100%">
                                    <input placeholder="{{'NOME' | translate }}" formControlName="razaoSocialUsuario"
                                        type="text" required="true">
                                    <small
                                        *ngIf="( form.controls['razaoSocialUsuario'].hasError('required') && form.controls['razaoSocialUsuario'].touched ) "
                                        class="mat-text-warn" translate>FAVOR_INFORMAR_O_NOME</small>
                                </div>
                            </div>
                            <div fxFlex>
                                <div class="p-field" style="width: 100%">
                                    <input required placeholder="{{'EMAIL' | translate }}" name="email"
                                        (blur)="blurFocusEmailUsuario()" formControlName="email" type="text">
                                    <small
                                        *ngIf="form.controls['email'].hasError('required') && form.controls['email'].touched"
                                        class="mat-text-warn" translate>FAVOR_INFORMAR_O_EMAIL_</small>
                                    <small
                                        *ngIf="form.controls['email'].errors?.email && form.controls['email'].touched"
                                        class="mat-text-warn" translate>VOCE_DEVE_INFORMAR_UM_EMAIL_VALIDO_
                                    </small>
                                </div>
                            </div>
                        </div>
                        <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="16px">
                            <div fxFlex="50">
                                <div class="p-field" style="width: 100%">
                                    <input matInput required placeholder="{{'LOGIN' | translate }}"
                                        formControlName="login" type="text">
                                    <small
                                        *ngIf="form.controls['login'].hasError('required') && form.controls['login'].touched"
                                        class="mat-text-warn" translate>FAVOR_INFORMAR_O_LOGIN_ </small>
                                </div>
                            </div>
                            <div fxFlex="50" fxLayoutGap="16px">
                                <div class="p-field" fxFlex>
                                    <input placeholder="{{'SENHA' | translate }}" formControlName="senha"
                                        type="password" required />
                                    <small
                                        *ngIf="form.controls['senha'].hasError('required') && form.controls['senha'].touched"
                                        class="mat-text-warn" translate>FAVOR_INFORMAR_A_SENHA_</small>
                                </div>
                                <div class="p-field" fxFlex>
                                    <input matInput placeholder="{{'CONFIRME_A_SENHA' | translate }}"
                                        formControlName="confirmeSenha" type="password">
                                    <small 
                                        *ngIf="form.controls['confirmeSenha'].hasError('required') && form.controls['confirmeSenha'].touched"
                                        class="mat-text-warn" translate>FAVOR_INFORMAR_A_SENHA_</small>
                                    <small 
                                        *ngIf="form.controls['confirmeSenha'].errors?.equalTo && form.controls['confirmeSenha'].touched"
                                        class="mat-text-warn" translate>SENHAS_NAO_CONFEREM_</small>
                                </div>
                            </div>
                        </div>
                        <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="16px">
                            <div fxFlex>
                                <div class="p-field" style="width: 100%">
                                    <input type="text" placeholder="{{'APELIDO' | translate }}" mat-tab
                                        name="fantasiaUsuario" formControlName="fantasiaUsuario" />
                                </div>
                            </div>
                            <div fxFlex>
                                <div class="p-field" style="width: 100%">
                                    <!-- <input type="text" mask="{{mascara}}"
                                            placeholder="{{'CNPJ_CPF' | translate }}" formControlName="cnpjUsuario"
                                            required validaCpfCnpj /> -->
                                    <small align="start"
                                        *ngIf="form.controls['cnpjUsuario'].hasError('required') && form.controls['cnpjUsuario'].touched"
                                        class="mat-text-warn" translate>FAVOR_INFORMAR_O_CNPJ_CPF</small>
                                    <small align="start" *ngIf="form.controls['cnpjUsuario'].hasError('cpf')" fxFlex
                                        translate>
                                        CPF_INVALIDO
                                    </small>
                                    <small align="start" *ngIf="form.controls['cnpjUsuario'].hasError('cnpj')" fxFlex
                                        translate>
                                        CNPJ_INVALIDO
                                    </small>
                                </div>
                            </div>
                        </div>
                        <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="16px">
                            <!-- <div fxLayout="row" fxFlex fxLayoutGap="16px">
                                    <div class="p-field" fxFlex>
                                        <input type="text" mask="(00) 0000-0000"
                                            [specialCharacters]="['(' ,')','-',' ' ]"
                                            placeholder="{{'TELEFONE' | translate }}"
                                            formControlName="telefoneUsuario" />
                                    </div>
                                    <div class="p-fild" fxFlex>
                                        <input type="text" [specialCharacters]="['(' ,')','-',' ' ]"
                                            mask="(00) 0 0000-0000" placeholder="{{'CELULAR' | translate }}"
                                            formControlName="celularUsuario" />
                                    </div>
                                </div> -->
                            <div fxLayout="row" fxFlex>
                                <div class="p-field" fxFlex>
                                    <p-dropdown required placeholder="{{'IDIOMA' | translate }}"
                                        formControlName="idioma">
                                        <!-- <mat-option *ngFor="let idioma of listaIdioma" [value]="idioma">
                                                {{ idioma.nome }}
                                            </mat-option> -->
                                    </p-dropdown>
                                </div>
                            </div>
                        </div>
                    </div>
                </p-tabPanel>
                <p-tabPanel>
                    {{'LICENCA' | translate}}
                    <div fxLayout="column">
                        <div fxLayout="column">
                            <div fxLayout="row" fxLayoutGap="16px">
                                <div class="p-field" fxFlex>
                                    <p-dropdown (blur)="buscarAdicional();calcularTotal()" formControlName="plano"
                                        placeholder="{{'PLANO' | translate}}" required>
                                        <!-- <mat-option *ngFor="let plan of listaPlano" (click)="selecionarPlano(plan)"
                                                [value]="plan">{{plan.nome}}
                                                {{plan.valor | currency:'BRL':'1.2-2'}}</mat-option> -->
                                    </p-dropdown>
                                    <small class="error-select"
                                        *ngIf="form.controls['plano'].hasError('required') && form.controls['plano'].touched">
                                        {{'CAMPO_OBRIGATORIO'
                                        | translate}}</small>
                                </div>
                                <div class="p-field" fxFlex>
                                    <p-dropdown (blur)="validarData()" fxFlex formControlName="periodo"
                                        placeholder="{{'PERIODO' | translate}}" required>
                                        <!-- <mat-option *ngFor="let _periodo of listaPeriodo"
                                                (click)="selecionarPeriodo(_periodo)" [value]="_periodo">
                                                {{_periodo.descricao}}</mat-option> -->
                                    </p-dropdown>
                                    <small class="error-select"
                                        *ngIf="form.controls['periodo'].hasError('required') && form.controls['periodo'].touched">
                                        {{'CAMPO_OBRIGATORIO'
                                        | translate}}</small>
                                </div>

                                <div class="p-field" fxFlex="25">
                                    <input autocomplete="off" type="number" formControlName="numeroUsuario"
                                        (blur)="calcularTotal()" placeholder="{{'NUMERO_USUARIOS' | translate}}"
                                        required>
                                    <small>{{'CAMPO_OBRIGATORIO' | translate}}</small>
                                </div>

                            </div>

                            <div fxLayout="row" fxLayoutGap="16px">
                                <div class="p-field" fxFlex>
                                    <input autocomplete="off" type="number" (blur)="validarDiaVencimento()"
                                        formControlName="diaVencimento" placeholder="{{'DIA_VENCIMENTO' | translate}}"
                                        requied>
                                    <small>{{'CAMPO_OBRIGATORIO' | translate}}</small>
                                </div>

                                <div class="p-field" fxFlex>
                                    <!-- <input formControlName="dataInicio" [matDatepicker]="startAtPicker"
                                            placeholder="{{'DATA_INICIO' | translate}}"> -->
                                    <small>{{'CAMPO_OBRIGATORIO' | translate}}</small>
                                    <p-calendar matSuffix [(ngModel)]="startAtPicker"></p-calendar>
                                    <p-calendar #startAtPicker></p-calendar>
                                </div>

                                <div class="p-field">
                                    <input autocomplete="off" type="text" formControlName="dataFim"
                                        placeholder="{{'DATA_FIM' | translate}}">
                                </div>
                                <div class="p-field">
                                    <!-- <input matInput autocomplete="off" type="tel" currencyMask
                                            [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"
                                            formControlName="valorTotal" [disabled]="true"
                                            placeholder="{{'VALOR_TOTAL' | translate}}"> -->
                                    <small>{{'CAMPO_OBRIGATORIO' | translate}}</small>
                                </div>
                            </div>

                            <h3>{{'ADICIONAIS' | translate}}</h3>
                            <p-divider></p-divider>

                            <!-- <mat-selection-list>
                                    <mat-list-option color="primary"
                                        *ngFor="let adicional of listaAdicional;let i = index;" (click)="marcarItem(i)"
                                        [selected]="adicional.marcado">
                                        {{adicional.nome}} - {{adicional.valor | currency:'BRL':"symbol":'1.2-2'}}
                                    </mat-list-option>
                                </mat-selection-list> -->

                            <div *ngIf="listaAdicional.length == 0" class="msg-list">{{'SEM_ADICIONAIS_DISPONIVEIS'
                                |
                                translate}}</div>
                        </div>
                    </div>
                </p-tabPanel>
            </p-tabView>
            <!-- </mat-card-content>
            <mat-card-actions>
                <button mat-raised-button color="primary" mat-button class="mat-raised mat-primary btn"
                    (click)="salvar()"><span translate>SALVAR</span></button>
            </mat-card-actions>
            </mat-card> -->
        </form>
    </div>

    <div page-actions class="page-actions p-d-flex p-flex-column p-ai-end">
        <button pButton class="disabled-loading" color="primary" (click)="salvar()" type="submit"><span
                translate>SALVAR</span></button>
    </div>
</app-pagecadastro>